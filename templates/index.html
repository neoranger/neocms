{% extends "base.html" %}
{% block title %}Inicio |{% endblock %}

<!-- ESTE BLOQUE ES PARA EL NOMBRE EN LA PESTA√ëA DEL NAVEGADOR -->
{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Tu Blog en espa√±ol</title>
{% endblock %}

{% block content %}
<header style="margin-bottom: 50px; padding-top: 20px;">
    <!-- TITULO COMENTADO PORQUE ESTA LA IMAGEN DE PORTADA EN VEZ DEL TEXTO. ESO SE CONFIGURA EN BASE.HTML -->
    <!-- <h1 style="font-size: 3rem; margin-bottom: 10px; font-weight: 800; letter-spacing: -1px;">
        NeoSite Blog
    </h1> -->
    <p style="color: var(--secondary); font-size: 1.2rem; max-width: 600px;">
        Blogueando desde ...
    </p>
</header>

<div style="display: grid; grid-template-columns: 3fr 1fr; gap: 40px;">
    
    <main>
        <form action="{{ url_for('index') }}" method="GET" style="margin-bottom: 40px; display: flex; gap: 10px;">
            <div style="position: relative; flex-grow: 1;">
                <input type="text" name="q" placeholder="Buscar posts..." value="{{ query or '' }}" style="margin-bottom: 0; padding-left: 40px;">
                <span style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); opacity: 0.5;">üîç</span>
            </div>
            <button type="submit">Buscar</button>
        </form>

        {% if current_tag or current_cat or query %}
            <p style="margin-bottom: 25px; font-size: 0.9rem; color: var(--secondary);">
                Mostrando resultados para: <strong>{{ current_tag or current_cat or query }}</strong> 
                <a href="{{ url_for('index') }}" style="margin-left: 10px; color: var(--primary);">[Limpiar filtros]</a>
            </p>
        {% endif %}

        {% for post in posts %}
        <article style="background: var(--card-bg); padding: 30px; border-radius: 15px; border: 1px solid var(--border); margin-bottom: 30px; box-shadow: 0 4px 6px var(--shadow);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <small style="color: var(--secondary); font-weight: 600;">{{ post.date }}</small>
                {% if post.category %}
                <span style="font-size: 0.7rem; background: var(--primary); color: white; padding: 3px 10px; border-radius: 20px; text-transform: uppercase; font-weight: bold;">
                    {{ post.category }}
                </span>
                {% endif %}
            </div>
            
            <h2 style="margin: 0 0 10px 0; font-size: 1.8rem;">
                <a href="{{ url_for('post', slug=post.slug) }}" style="color: var(--text); text-decoration: none;">{{ post.title }}</a>
            </h2>
            
            <p style="color: var(--secondary); line-height: 1.6; margin-bottom: 20px;">{{ post.description }}</p>
            
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                {% for tag in post.tags_list %}
                    <a href="{{ url_for('index', tag=tag) }}" style="font-size: 0.75rem; color: var(--primary); font-weight: 500;">#{{ tag }}</a>
                {% endfor %}
            </div>
            <small style="color: var(--secondary); margin-left: 10px;">‚Ä¢ {{ post.read_time }} min lectura</small>
        </article>
        {% else %}
            <div style="text-align: center; padding: 60px; border: 2px dashed var(--border); border-radius: 15px;">
                <p style="color: var(--secondary);">No se encontraron publicaciones que coincidan con tu b√∫squeda.</p>
            </div>
        {% endfor %}
        
        <div style="display: flex; justify-content: center; gap: 20px; margin-top: 40px; margin-bottom: 40px;">
            {% if has_prev %}
            <a href="{{ url_for('index', page=page-1, q=query, tag=current_tag, category=current_cat) }}" 
                style="background: var(--border); color: var(--text); padding: 10px 20px; border-radius: 8px; text-decoration: none;">
                ‚Üê Anterior
            </a>
            {% endif %}

            {% if has_next %}
                <a href="{{ url_for('index', page=page+1, q=query, tag=current_tag, category=current_cat) }}" 
                    style="background: var(--primary); color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none;">
                    Siguiente ‚Üí
                </a>
            {% endif %}
        </div>
    </main>

    <aside>
        <div style="position: sticky; top: 40px;">
            <div style="margin-top: 30px; opacity: 0.6;">
                <a href="{{ url_for('rss') }}" style="display: flex; align-items: center; gap: 8px; font-size: 0.9rem;">
                    <span style="color: #ee802f;">üß°</span> Suscribirse v√≠a RSS
                </a>
            </div>            
            
            <h3 style="font-size: 1rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 20px; border-bottom: 2px solid var(--primary); padding-bottom: 5px;">
                Categor√≠as
            </h3>
            <ul style="list-style: none; padding: 0;">
                {% for cat, count in categories.items() %}
                <li style="margin-bottom: 12px;">
                    <a href="{{ url_for('index', category=cat|lower) }}" style="display: flex; justify-content: space-between; text-decoration: none; color: var(--text);">
                        <span>{{ cat }}</span>
                        <span style="color: var(--secondary); opacity: 0.6;">{{ count }}</span>
                    </a>
                </li>
                {% endfor %}
            </ul>

            <h3 style="font-size: 1rem; text-transform: uppercase; letter-spacing: 1px; margin-top: 50px; margin-bottom: 20px; border-bottom: 2px solid var(--primary); padding-bottom: 5px;>Etiquetas</h3>
            <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                {% for tag in tags %}
                <a href="{{ url_for('index', tag=tag) }}" style="background: var(--border); color: var(--text); padding: 5px 12px; border-radius: 8px; font-size: 0.8rem; text-decoration: none;">
                    {{ tag }}
                </a>
                {% endfor %}
            </div>
        </div>
    </aside>
</div>
{% endblock %}
